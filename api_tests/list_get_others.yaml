# Test generated by RoostGPT for test qlue-artillery using AI Type Open AI and AI Model gpt-4


# RoostTestHash=fe16559128

config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "list_get_others.csv"
    fields:
      - "houseId"
    skipHeader: true
  phases:
    - duration: 60
      arrivalRate: 20

scenarios:
  - name: "Non-success API responses"
    flow:
      - log: "Sending a request without required query params. Expecting a 400 response"
        get:
          url: "/device/list"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        expect:
          - statusCode: 400
          - hasProperty: "error"
          - equals:
              - "{{ message }}"
              - "bad input parameter"

      - think: 5

      - log: "Sending a request with invalid token. Expecting a 401 response"
        get:
          url: "/device/list?houseId={{ houseId }}"
          headers:
            Authorization: "Bearer invalid_token"
        expect:
          - statusCode: 401
          - hasProperty: "error"
          - equals:
              - "{{ message }}"
              - "Unauthorized"

      - think: 5

      - log: "Sending a request to an invalid URL. Expecting a 404 response"
        get:
          url: "/invalid/url?houseId={{ houseId }}"
          headers:
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        expect:
          - statusCode: 404
          - hasProperty: "error"
          - equals:
              - "{{ message }}"
              - "Not Found"
